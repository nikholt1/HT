<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Refract Settings</title>
    <link rel="stylesheet" th:href="@{/main.css}">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" th:href="@{https://raw.githubusercontent.com/nikholt1/HTasset/refs/heads/main/storedAssets/R.png}">

</head>
<body>

<nav class="navbar">
    <div class="nav-left">
        <a class="navItem" th:href="@{/videos/browser}">Browser</a>
        <a class="navItem" th:href="@{/profiles/add}">Manage Users</a>
        <a class="navItem" th:href="@{/profiles/manageAccount}">Add New User</a>
    </div>

    <div class="nav-right">
        <a th:href="@{/videos/settings#help}">
            <button class="help-btn" id="helpBtn">Help</button>
        </a>


        <div class="profile-dropdown">
            <img th:src="@{${'/profileImages/' + currentUser.profilePicturePath}}"
                 alt="Profile Picture"
                 class="profile-pic" id="profilePic">
        </div>
    </div>
</nav>

<!-- Dropdown placed outside nav -->
<div class="dropdown-menu" id="dropdownMenu">
    <a class="dpdItem" th:href="@{/}">Change Profile</a>
    <a class="dpdItem" th:href="@{/profiles/manageAccount}">Manage users</a>
    <a class="dpdItem" th:href="@{/profiles/add}">Add new user</a>
    <a class="dpdItem" th:href="@{/videos/settings}">Settings</a>
    <a class="dpdItemLogOut" th:href="@{/logout}">Logout</a>
</div>




<section class="settingsSection">
    <div class="hero-left-content" th:if="${previewVideoPath == null}">
        <h1>The Future Stays Local</h1>
        <p>On refract you are the master of your content.</p>
        <br><br>
        <h1>Here in the settings menu</h1>
        <p>
            you can manage the folder where your videos are placed, you have the opportunity to direct the system to find other folders that are customized by different people.

            Changing the username of the current user can also be done in here.

            Otherwise you can read about the setup of the system and the disclaimers of the application.</p>
    </div>

</section>

<section class="barMagenta">
    <!-- <img class="barMagentaImage" th:src="@{/images/imagesTemplates/barMagentaLight.jpg}"> -->
    <img class="barMagentaImage" th:src="@{https://raw.githubusercontent.com/nikholt1/HTasset/refs/heads/main/browser/barMagenta.png}">

</section>

<section class="devicesSection">



    <div class="devices-image-container">
        <h1>Welcome back <span th:text="${userName}"></span></h1>


        <p class="current-path" th:text="${videoPath}"></p>

        <form class="settings-form" th:action="@{/videos/updateFolder}" method="post">
            <span th:if="${errorMessage}" th:text="${errorMessage}"></span>
            <input type="text" name="folderPath" placeholder="Enter new Folderpath" />


            <button type="submit">Update Folder</button>
        </form>

        <form class="settings-form" th:action="@{/videos/updateUserName}" method="post">
            <input type="text" name="Username" placeholder="Enter new Username"/>
            <button type="submit">Update Username</button>
        </form>
        <br><br><br><br>

        <h3 class="devices-text">Watch anything you want</h3>
        <p class="devices-subtext">on any device you want</p>
        <img class="devicesImg" th:src="@{/images/imagesTemplates/devices.png}" alt="Devices">
        <p class="devices-subtext">As long as it has a browser, you are good to go!</p>
    </div>


</section>



<section class="descriptionSection" id="help">
    <div class="descriptionDiv">
        <h3>Hello <span th:text="${userName}">username</span></h3>
        <strong>This is how it works</strong>
        <p id="startingServerDesc">Starting the server on a specific computer: <br>
            1. When the program is installed, the user should set it to the startup parameters <br>
            2. In the startup program, if a monitor is connected, the user should see the serverside desktop application <br>
            3. In the application the user should see the current IPv4 and the URL that the rest of the devices should connect to <br>
            4. In the desktop application the user should be able to specify the path to the videos they prefer
            <br>  The user should also be able to specify the path in the browser at the given URL under /videos/settings</p>
        <strong id="browserWorksDesc">How the browser works</strong>
        <p>1. The browser takes the specified path and looks for all folders and videos categorized in those folders <br>
            2. Refract supplies a "generate folders" in the desktop application within the specified folder with categories and pictures for them <br>
            3. If the user wishes to make their own categories (folder) they can do so in the specified folder <br>
            4. Subcategories or series seasons etc. can be specified as the user wishes by configuring a folder path as they please</p>

        <strong id="settingsMenuDesc">Settings menu</strong>
        <p>1. The user is able to change the folder path at the top of the settings page <br>
            2. The program should check for secure folders, to protect the host computers vital folders <br>
            3. The user should also be able to change the username for the account</p>

        <strong id="streamingToAppleDesc">Streaming to AppleTV</strong>
        <p>
            1. On the phone or device they are using, the user opens the video they wish to stream <br>
            2. In the top of the video the user should see a streaming button <br>
            3. After clicking the streaming button the user selects the device they want to stream to <br>
            4. After the user has selected the device they wish to stream to, the video should appear on the selected device and start streaming
        </p>

        <strong id="streamingToChromeDesc">Streaming to ChromeCast</strong>
        <p>
            1. On the phone or device they are using the user opens the video they wish to stream <br>
            2. In the top of the video the user should see a streaming button <br>
            3. After clicking the streaming button the user selects the device they want to stream to <br>
            4. After the user has selected the device they wish to stream to, the video should appear on the selected device and start streaming
        </p>
        <strong id="DisclaimerAndLicenses">Disclaimer and licenses</strong>
        <a></a>
        <p>See the licenses here: <a class="footerLinksPortfolio" href="https://github.com/nikholt1/HT?tab=GPL-3.0-1-ov-file">github.com/nikholt1/HT?tab=GPL-3.0-1-ov-file</a></p>
        <p>For the notice visit the Github page and look for the NOTICE.txt file, which will include all dependency necessary information</p>
    </div>



</section>
<section class="arrowToFooter">
    <p>To read about the project to understand more about how the program functions you can visit:</p>
    <span>▼</span>

</section>
<img class="barMagentaImageReverse" th:src="@{/images/imagesTemplates/barMagentaLight.jpg}">
<section class="footer">
    <footer>
        <div class="footer-container">
            <!-- Left side -->
            <div class="footer-left">
                <img class="hero-logo" src="https://raw.githubusercontent.com/nikholt1/HTasset/refs/heads/main/loginImage/logo.png">
                <p>Visit the project here: <a class="footerLinksPortfolio" href="niklasholtlau.web.app/R.html">niklasholtlau.web.app/R.html</a></p>
                <p>Go ahead and visit my github, linked in or my portfolio website, which contains a lot more about who i am, and my other projects</p>
            </div>

            <!-- Right side -->
            <div class="footer-right">
                <p><img src="https://cdn-icons-png.flaticon.com/512/2111/2111432.png">
                    <a class="footerLinks" href="https://github.com/nikholt1" about="_blank">nikholt1</a></p>
                <p><img src="https://cdn-icons-png.flaticon.com/512/3536/3536505.png">
                    <a class="footerLinks" href="https://www.linkedin.com/in/niklas-holt-l%C3%A4u-0b06542a4/" about="_blank">Niklas Holt Läu</a></p>
                <p><img class="portfolioLogo" src="https://raw.githubusercontent.com/nikholt1/HTasset/refs/heads/main/storedAssets/blob.png" >
                    <a class="footerLinks" href="https://niklasholtlau.web.app/R.html" about="_blank">Portfolio Website</a></p>
            </div>
        </div>
    </footer>
</section>


</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const profilePic = document.getElementById("profilePic");
        const dropdown = document.getElementById("dropdownMenu");

        if (profilePic && dropdown) {
            profilePic.addEventListener("click", (e) => {
                e.stopPropagation();
                dropdown.style.display =
                    dropdown.style.display === "block" ? "none" : "block";
            });

            document.addEventListener("click", () => {
                dropdown.style.display = "none";
            });
        }
    });
</script>

</html>